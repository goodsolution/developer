<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <title th:text="#{watch.tab.title} + ' - ' + ${course.title} + ' Â· ' + ${@applicationConfig.getAppNameFront()}"></title>
    <div th:replace="fragments/front-head"></div>
    <script th:src="@{/js/watch-lesson.js}"></script>
    <script th:src="@{/js/lessons-menu.js}"></script>
    <script th:src="@{/js/course-attachments.js}"></script>
    <script th:replace="fragments/languages-script"></script>
    <script th:inline="javascript">
        var courseId = [[${courseId}]];
        var lessonId = [[${lessonId}]];
        var course = [[${course}]];
    </script>
</head>

<body>

<nav th:replace="${@courseCustomersService.getLoggedCustomer()} ? 'fragments/logged-in-navbar' : 'fragments/logged-out-navbar'"></nav>

<div class="container my-5">

    <div class="text-center">
        <h3 th:text="${course.title}"></h3>

    </div>

    <div class="row my-5">

        <!--Left Column-->
        <div class="col-md-4 text-center">

            <!--Lessons Menu-->
            <div id="lessons-menu" class="p-1 align-items-center justify-content-center">
            </div>


            <!--Files to download-->
            <div id="attachments" class="text-center mt-5" style="display:none;">

                <h5 th:text="#{watch.files.to.download}"></h5>

                <div id="result-container">
                    <div class="table-responsive mb-0 pb-0">
                        <table class="table bg-light table-bordered table-hover table-sm mb-0 pb-0">
                            <thead class="thead-light">
                            <tr>
                                <th class="align-middle" th:text="#{watch.name}"></th>
                                <th class="align-middle" th:text="#{watch.download}"></th>
                            </tr>
                            </thead>
                            <tbody id="course-attachments-records">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!--Course Opinion-->
            <div class="text-center mt-5">
                <button id="show-course-opinion-form-button" class="btn btn-warning" onclick="showCourseOpinionForm()" th:text="#{watch.add.course.comment}"></button>
                <div id="course-opinion-form" class="mt-3" style="display:none;">
                    <form>
                        <label for="course-comment" th:text="#{watch.enter.course.comment}"></label>
                        <textarea id="course-comment" type="text" class="form-control" rows="3"></textarea>
                        <button type="button" class="btn btn-warning mt-3" onclick="sendCourseComment()" th:text="#{watch.send.course.comment}"></button>
                    </form>
                </div>
                <div id="course-comment-added-success-alert" class="alert alert-success" role="alert" style="display:none;">
                    <span th:text="#{watch.thanks.for.course.comment}"></span>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>

        </div>

        <!--Right Column-->
        <div class="col-md-8">

            <!--Lesson Title-->
            <h5 id="title" class="mt-3 text-center"></h5>

            <!--Lesson Video-->
            <div id="video-place" style="position:relative;padding-top:56.25%;display:none;">
                <iframe id="video" src=""
                        style="position:absolute;top:0;left:0;width:100%;height:100%;"
                        allowfullscreen="allowfullscreen"
                        mozallowfullscreen="mozallowfullscreen"
                        msallowfullscreen="msallowfullscreen"
                        oallowfullscreen="oallowfullscreen"
                        webkitallowfullscreen="webkitallowfullscreen"></iframe>
            </div>

            <!--Lesson Description-->
            <div id="description" class="mt-3"></div>

            <!--Mark as watched button-->
            <div id="watched-button-field" class="d-flex justify-content-end mt-3"></div>

            <div class="border mt-3"></div>

            <!--Comments Adding-->
            <div class="mt-3">

                <!--Add comment form-->
                <form class="text-center">
                    <label for="lesson-comment" th:text="#{watch.add.comment.to.lesson}"></label>
                    <textarea id="lesson-comment" type="text" class="form-control" rows="3"></textarea>
                    <button type="button" class="btn btn-success mt-3" onclick="sendLessonComment()" th:text="#{watch.add.lesson.comment}"></button>
                </form>

                <!--Comment added alert-->
                <div id="lesson-comment-added-success-alert" class="alert alert-success mt-3" role="alert" style="display:none;">
                    <span th:text="#{watch.lesson.comment.added.success}"></span>
                    <button type="button" class="close" onclick="hideLessonCommentSuccessAddedAlert()">
                        <span>&times;</span>
                    </button>
                </div>

            </div>


            <!--Comments to lesson-->
            <h4 class="text-center mt-5" th:text="#{watch.lesson.comments}"></h4>

            <div id="lesson-comments" class="text-center">
            </div>

        </div>

    </div>

</div>
<footer th:replace="fragments/footer"></footer>
</body>

</html>