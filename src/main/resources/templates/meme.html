<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="fragments/head"></div>
    <script th:src="@{/js/meme.js}"></script>
    <script th:inline="javascript">
            var meme = [[${meme}]];
    </script>
</head>

<body>
<div th:replace="fragments/menu :: menu"></div>

<div class="container">
    <div class="text-center">
        <h4>Meme details</h4>
        <h5>ID: <span th:text="${meme.id}"></span></h5>
    </div>

    <div class="bg-light p-5 border">
        <div class="form-row">
            <div class="form-group col-md-4 text-center">
                <label for="title">Title</label>
                <input type="text" class="form-control" id="title" th:value="${meme.title}">
            </div>

            <div class="form-group col-md-4 text-center">
                <label for="language">Language</label>
                <select id="language" class="form-control">
                    <option th:each="language : ${languagesDict}"
                            th:value="${language.code}"
                            th:text="${language.value}"
                            th:selected="(${language.code} == *{meme.language})">
                    </option>
                </select>
            </div>

            <div class="form-group col-md-4 text-center">
                <label for="creation-datetime">Creation date</label>
                <input type="text" class="form-control" id="creation-datetime" readonly>
            </div>

            <div class="form-group col-12 text-center">
                <label for="code">Code</label>
                <input type="text" class="form-control" id="code" th:value="${meme.code}">
            </div>

            <div class="form-group col-12 text-center">
                <label for="description">Description</label>
                <textarea id="description" type="text" class="form-control" rows="3" th:text="${meme.description}"></textarea>
            </div>

            <div class="form-group col-12 text-center">
                <label for="keywords">Keywords</label>
                <textarea id="keywords" type="text" class="form-control" rows="3" th:text="${meme.keywords}"></textarea>
            </div>
        </div>
        <div class="text-center">
            <button type="button" class="btn btn-danger mt-3" data-toggle="modal" data-target="#delete-object-modal">Delete</button>
            <button type="button" class="btn btn-warning mt-3" onclick="history.back()" th:text="#{Cancel}"></button>
            <button type="button" class="btn btn-warning mt-3" onclick="sendUpdateRequest()">Save changes</button>
        </div>
    </div>

    <div class="bg-light p-5 mt-3 mb-5 border">
        <h5 class="text-center">Photo:</h5>
        <div class="text-center my-3">
            <img th:src="@{@{/meme/file/} + ${meme.fileName} + @{/}}" class="img-thumbnail" width="300px" height="300px">
        </div>

        <form id="upload-meme-photo" class="upload">
            <h5 class="text-center">Change photo</h5>
            <div class="text-center">
                <input type="file" name="file" accept="image/*">
                <input type="submit" value="Upload">
            </div>
        </form>
    </div>

</div>

<div th:replace="fragments/operation-successful-modal :: modal"></div>
<div th:replace="fragments/delete-object-modal :: modal"></div>
</body>

</html>